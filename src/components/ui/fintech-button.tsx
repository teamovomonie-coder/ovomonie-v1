import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport { cn } from \"@/lib/utils\";\nimport { \n    Loader2, \n    Shield, \n    Lock, \n    CheckCircle, \n    AlertTriangle,\n    CreditCard,\n    Send,\n    Download\n} from \"lucide-react\";\n\nconst fintechButtonVariants = cva(\n    \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n    {\n        variants: {\n            variant: {\n                default: \"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0\",\n                destructive: \"bg-destructive text-destructive-foreground shadow-md hover:bg-destructive/90 hover:shadow-lg\",\n                outline: \"border-2 border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50\",\n                secondary: \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80 hover:shadow-md\",\n                ghost: \"hover:bg-accent hover:text-accent-foreground\",\n                link: \"text-primary underline-offset-4 hover:underline\",\n                success: \"bg-green-600 text-white shadow-md hover:bg-green-700 hover:shadow-lg\",\n                warning: \"bg-yellow-600 text-white shadow-md hover:bg-yellow-700 hover:shadow-lg\",\n                secure: \"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground shadow-lg hover:shadow-xl hover:-translate-y-0.5 border border-primary/20\",\n                payment: \"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5\",\n            },\n            size: {\n                default: \"h-11 px-6 py-2\",\n                sm: \"h-9 rounded-md px-4\",\n                lg: \"h-12 rounded-lg px-8 text-base\",\n                xl: \"h-14 rounded-xl px-10 text-lg\",\n                icon: \"h-11 w-11\",\n                \"icon-sm\": \"h-9 w-9\",\n            },\n            loading: {\n                true: \"cursor-not-allowed opacity-70\",\n                false: \"\"\n            }\n        },\n        defaultVariants: {\n            variant: \"default\",\n            size: \"default\",\n            loading: false\n        },\n    }\n);\n\nexport interface FintechButtonProps\n    extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof fintechButtonVariants> {\n    asChild?: boolean;\n    loading?: boolean;\n    secure?: boolean;\n    success?: boolean;\n    loadingText?: string;\n    icon?: React.ReactNode;\n    iconPosition?: 'left' | 'right';\n}\n\nconst FintechButton = React.forwardRef<HTMLButtonElement, FintechButtonProps>(\n    ({ \n        className, \n        variant, \n        size, \n        asChild = false, \n        loading = false,\n        secure = false,\n        success = false,\n        loadingText,\n        icon,\n        iconPosition = 'left',\n        children,\n        disabled,\n        ...props \n    }, ref) => {\n        const Comp = asChild ? Slot : \"button\";\n        \n        const getIcon = () => {\n            if (loading) {\n                return <Loader2 className=\"h-4 w-4 animate-spin\" />;\n            }\n            if (success) {\n                return <CheckCircle className=\"h-4 w-4\" />;\n            }\n            if (secure) {\n                return <Shield className=\"h-4 w-4\" />;\n            }\n            return icon;\n        };\n        \n        const displayIcon = getIcon();\n        const displayText = loading && loadingText ? loadingText : children;\n        \n        return (\n            <Comp\n                className={cn(fintechButtonVariants({ \n                    variant: success ? 'success' : secure ? 'secure' : variant, \n                    size, \n                    loading,\n                    className \n                }))}\n                ref={ref}\n                disabled={disabled || loading}\n                {...props}\n            >\n                {displayIcon && iconPosition === 'left' && displayIcon}\n                {displayText}\n                {displayIcon && iconPosition === 'right' && displayIcon}\n            </Comp>\n        );\n    }\n);\n\nFintechButton.displayName = \"FintechButton\";\n\n// Specialized Button Components\nconst PaymentButton = React.forwardRef<\n    HTMLButtonElement,\n    Omit<FintechButtonProps, 'variant'> & { amount?: number; currency?: string }\n>(({ amount, currency = 'NGN', children, ...props }, ref) => {\n    const formattedAmount = amount \n        ? new Intl.NumberFormat('en-NG', { style: 'currency', currency }).format(amount / 100)\n        : null;\n    \n    return (\n        <FintechButton\n            ref={ref}\n            variant=\"payment\"\n            icon={<CreditCard className=\"h-4 w-4\" />}\n            {...props}\n        >\n            {children || (formattedAmount ? `Pay ${formattedAmount}` : 'Pay Now')}\n        </FintechButton>\n    );\n});\n\nPaymentButton.displayName = \"PaymentButton\";\n\nconst TransferButton = React.forwardRef<\n    HTMLButtonElement,\n    Omit<FintechButtonProps, 'variant' | 'icon'>\n>(({ children, ...props }, ref) => {\n    return (\n        <FintechButton\n            ref={ref}\n            variant=\"secure\"\n            icon={<Send className=\"h-4 w-4\" />}\n            {...props}\n        >\n            {children || 'Send Money'}\n        </FintechButton>\n    );\n});\n\nTransferButton.displayName = \"TransferButton\";\n\nconst SecureButton = React.forwardRef<\n    HTMLButtonElement,\n    Omit<FintechButtonProps, 'secure'>\n>(({ children, ...props }, ref) => {\n    return (\n        <FintechButton\n            ref={ref}\n            secure\n            {...props}\n        >\n            {children}\n        </FintechButton>\n    );\n});\n\nSecureButton.displayName = \"SecureButton\";\n\nconst DownloadButton = React.forwardRef<\n    HTMLButtonElement,\n    Omit<FintechButtonProps, 'icon'> & { format?: string }\n>(({ format, children, ...props }, ref) => {\n    return (\n        <FintechButton\n            ref={ref}\n            variant=\"outline\"\n            icon={<Download className=\"h-4 w-4\" />}\n            {...props}\n        >\n            {children || `Download${format ? ` ${format.toUpperCase()}` : ''}`}\n        </FintechButton>\n    );\n});\n\nDownloadButton.displayName = \"DownloadButton\";\n\n// Button Group Component\ninterface ButtonGroupProps extends React.HTMLAttributes<HTMLDivElement> {\n    orientation?: 'horizontal' | 'vertical';\n    size?: 'sm' | 'default' | 'lg';\n}\n\nconst ButtonGroup = React.forwardRef<HTMLDivElement, ButtonGroupProps>(\n    ({ className, orientation = 'horizontal', size = 'default', children, ...props }, ref) => {\n        return (\n            <div\n                ref={ref}\n                className={cn(\n                    \"inline-flex\",\n                    orientation === 'horizontal' \n                        ? \"flex-row [&>button]:rounded-none [&>button:first-child]:rounded-l-lg [&>button:last-child]:rounded-r-lg [&>button:not(:first-child)]:border-l-0\" \n                        : \"flex-col [&>button]:rounded-none [&>button:first-child]:rounded-t-lg [&>button:last-child]:rounded-b-lg [&>button:not(:first-child)]:border-t-0\",\n                    className\n                )}\n                {...props}\n            >\n                {children}\n            </div>\n        );\n    }\n);\n\nButtonGroup.displayName = \"ButtonGroup\";\n\nexport { \n    FintechButton, \n    PaymentButton, \n    TransferButton, \n    SecureButton, \n    DownloadButton,\n    ButtonGroup,\n    fintechButtonVariants \n};